var n=false;function o(){return function(){}}
(function(){function b(l){var f,h,k,a,g,j;k=l.length;h=0;for(f="";h<k;){a=l.charCodeAt(h++)&255;if(h==k){f+=d.charAt(a>>2);f+=d.charAt((a&3)<<4);f+="==";break}g=l.charCodeAt(h++);if(h==k){f+=d.charAt(a>>2);f+=d.charAt((a&3)<<4|(g&240)>>4);f+=d.charAt((g&15)<<2);f+="=";break}j=l.charCodeAt(h++);f+=d.charAt(a>>2);f+=d.charAt((a&3)<<4|(g&240)>>4);f+=d.charAt((g&15)<<2|(j&192)>>6);f+=d.charAt(j&63)}return f}function i(l){var f,h,k,a,g;a=l.length;k=0;for(g="";k<a;){do f=m[l.charCodeAt(k++)&255];while(k<
a&&f==-1);if(f==-1)break;do h=m[l.charCodeAt(k++)&255];while(k<a&&h==-1);if(h==-1)break;g+=String.fromCharCode(f<<2|(h&48)>>4);do{f=l.charCodeAt(k++)&255;if(f==61)return g;f=m[f]}while(k<a&&f==-1);if(f==-1)break;g+=String.fromCharCode((h&15)<<4|(f&60)>>2);do{h=l.charCodeAt(k++)&255;if(h==61)return g;h=m[h]}while(k<a&&h==-1);if(h==-1)break;g+=String.fromCharCode((f&3)<<6|h)}return g}var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,
-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];if(!window.btoa)window.btoa=b;if(!window.atob)window.atob=i})();
var q=function(){function b(a,g,j){if(g&&j){var c=document.createElement("canvas");c.width=g;c.height=j;c.style.width=g+"px";c.style.height=j+"px";c.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,g,j);return c}return a}function i(a){var g=document.createElement("img");g.src=a;return g}function d(a){var g="";if(typeof a=="string")g=a;else for(var j=0;j<a.length;j++)g+=String.fromCharCode(a[j]);return btoa(g)}var m=n,l=document.createElement("canvas");if(l.getContext("2d"))m=true;if(!m)return{B:o(),
o:o(),C:o()};var f=!!l.getContext("2d").getImageData,h=!!l.toDataURL,k=!!window.btoa;return{o:function(a,g,j,c){if(!h)return n;a=b(a,j,c).toDataURL("image/png");if(g)return i(a);else{g=a.replace("image/png","image/octet-stream");document.location.href=g}return true},C:function(a,g,j,c){if(!h)return n;a=b(a,j,c).toDataURL("image/jpeg");if(a.indexOf("image/jpeg")!=5)return n;if(g)return i(a);else{g=a.replace("image/jpeg","image/octet-stream");document.location.href=g}return true},B:function(a,g,j,c){if(!(f&&
k))return n;a=b(a,j,c);j=parseInt(a.width);c=parseInt(a.height);var p=a.getContext("2d").getImageData(0,0,j,c);a=[];j=p.width;var t=p.height;a.push(66);a.push(77);c=j*t*3+54;a.push(c%256);c=Math.floor(c/256);a.push(c%256);c=Math.floor(c/256);a.push(c%256);c=Math.floor(c/256);a.push(c%256);a.push(0);a.push(0);a.push(0);a.push(0);a.push(54);a.push(0);a.push(0);a.push(0);c=[];c.push(40);c.push(0);c.push(0);c.push(0);var e=j;c.push(e%256);e=Math.floor(e/256);c.push(e%256);e=Math.floor(e/256);c.push(e%
256);e=Math.floor(e/256);c.push(e%256);e=t;c.push(e%256);e=Math.floor(e/256);c.push(e%256);e=Math.floor(e/256);c.push(e%256);e=Math.floor(e/256);c.push(e%256);c.push(1);c.push(0);c.push(24);c.push(0);c.push(0);c.push(0);c.push(0);c.push(0);e=j*t*3;c.push(e%256);e=Math.floor(e/256);c.push(e%256);e=Math.floor(e/256);c.push(e%256);e=Math.floor(e/256);c.push(e%256);for(e=0;e<16;e++)c.push(0);e=(4-j*3%4)%4;p=p.data;var C="";do{for(var r=j*(t-1)*4,u="",y=0;y<j;y++){var z=4*y;u+=String.fromCharCode(p[r+
z+2]);u+=String.fromCharCode(p[r+z+1]);u+=String.fromCharCode(p[r+z])}for(r=0;r<e;r++)u+=String.fromCharCode(0);C+=u}while(--t);a=d(a.concat(c))+d(C);if(g)return i("data:image/bmp;base64,"+a);else document.location.href="data:image/octet-stream;base64,"+a;return true}}}();function s(){typeof window.console!="undefined"&&window.console.log("DEBUG:",arguments)}function v(b,i){return function(){i.apply(b,arguments)}}
function w(b){b+="";var i=b.split(".");b=i[0];i=i.length>1?"."+i[1]:"";for(var d=/(\d+)(\d{3})/;d.test(b);)b=b.replace(d,"$1,$2");return b+i}function x(b){this.s=b;this.i=[]}function A(b,i){b.i.push(i)}function B(b,i){for(var d=0;d<b.i.length;++d)b.i[d](b.s,i)}
function D(b){this.target=b;this.F=new x(this);this.m=new x(this);if(typeof window.FileReader=="undefined"){alert("Your browser doesn't support the new File API :(\n\nTry Chrome or Firefox 3.6+");return n}this.b=new FileReader;b.addEventListener("dragenter",v(this,this.u),n);b.addEventListener("dragover",v(this,this.v),n);b.addEventListener("drop",v(this,this.t),n)}D.prototype.u=function(b){b.stopPropagation();b.preventDefault()};D.prototype.v=function(b){b.stopPropagation();b.preventDefault()};
D.prototype.t=function(b){b.stopPropagation();b.preventDefault();b=b.dataTransfer.files[0];delete this.b.result;this.b=new FileReader;this.b.onprogress=v(this,this.A);this.b.onerror=v(this,this.w);this.b.onload=v(this,this.z);this.b.readAsBinaryString(b)};D.prototype.w=o();D.prototype.A=o();D.prototype.z=function(b){B(this.m,b.target.result);$("#instructions").fadeOut(300)};
function E(b,i){this.c=0;this.data=n;this.canvas=b;this.a=b.getContext("2d");this.n=new x(this);this.l=new x(this);this.j=[];this.D=[0,1,2,3,0,1,2,3];this.k=[];this.reset();var d=this;A((new D(i)).m,function(m,l){d.canvas.width=d.canvas.width;d.data=l;d.c=0;d.reset();B(d.n)})}E.prototype.reset=function(){for(var b=0;b<8;++b){this.j[b]=Math.random()*Math.PI*2;this.k[b]={x:this.width/2,y:this.height/2}}};E.prototype.resize=function(b,i){this.width=b;this.height=i;this.reset()};
E.prototype.g=function(){if(this.data)for(var b=0;b<8;++b)if(this.c<this.data.length){var i,d,m,l=this.data[this.c].charCodeAt(0),f=4;delete this.data[this.c];this.a.lineCap="round";this.a.lineJoin="round";for(var h=0,k=7,a=1;h<8;++h,--k){a=h%4+1.5;i=(l&1<<k)>>k;d=this.k[h];m=this.j[h];m+=(i==1?1:-1)*0.32;m+=(Math.random()-0.5)*0.3;d.x=d.x<0?this.width:d.x>this.width?0:d.x;d.y=d.y<0?this.height:d.y>this.height?0:d.y;f=a+Math.random()*2.5;i=d.x+Math.cos(m)*f;f=d.y+Math.sin(m)*f;this.a.beginPath();
this.a.lineWidth=a+1;this.a.strokeStyle="#222222";this.a.moveTo(d.x,d.y);this.a.lineTo(i,f);this.a.stroke();this.a.beginPath();this.a.lineWidth=a;this.a.strokeStyle="#FFFFFF";this.a.moveTo(d.x,d.y);this.a.lineTo(i,f);this.a.stroke();d.x=i;d.y=f;this.k[h]=d;this.j[h]=m}$("#info").text("Byte "+w(this.c+1)+" of "+w(this.data.length));this.c++}else{s("Complete!");B(this.l);break}};
function F(){this.p=1E3/60;this.e=n;this.d=document.getElementById("canvas");this.r=document.getElementById("overlay");this.f=new E(this.d,this.r);this.q=v(this,this.g);A(this.f.n,v(this,this.start));A(this.f.l,v(this,this.stop));$(window).resize(v(this,this.resize));G(this);this.h=$("<form>");this.h.attr("method","post");this.h.attr("action","download.php");this._data=$("<input>");this._data.attr("type","hidden");this._data.attr("name","data");this.h.append(this._data);this.resize()}
function G(b){$("#save").click(function(){q.o(b.d);return n});$("#play").click(function(){if(b.e){$(this).text("play");b.stop()}else{$(this).text("pause");b.start()}return n})}F.prototype.resize=function(){var b=$(window).width()-0,i=$(window).height()-$("header").height()-0;this.d.width=b;this.d.height=i;$(this.d).css("margin",($(window).width()-b)*0.5);this.f.resize(b,i)};F.prototype.start=function(){if(!this.e){this.e=true;this.g()}};F.prototype.stop=function(){this.e=n};
F.prototype.g=function(){if(this.e){this.f.g();setTimeout(this.q,this.p)}};$(document).ready(function(){new F});